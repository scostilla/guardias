<h2 mat-dialog-title>{{data ? 'Modificar' : 'Agregar'}} Legajo
  <h5 class="['required']Field">*Campos Obligatorios</h5>
</h2>
    <!--<mat-form-field appearance="fill">
      <mat-label>Revista</mat-label>
      <mat-select formControlName="revista" [compareWith]="compareRevista">
        <mat-option *ngFor="let revista of revistas" [value]="revista" >{{ revista.agrupacion }}</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('revista')?.errors?.['required']">La revista es requerida.</mat-error>
    </mat-form-field>-->
    
    <mat-dialog-content class="mat-typography">
      <div class="container grupo-form" [hidden]="!revistaFormEnabled">
        <form [formGroup]="revistaForm">
        <div class="titulos-second negrita contenedor-titulo-select-tabla">Revista:</div>
    
        <mat-form-field appearance="fill">
          <mat-label>Agrupación</mat-label>
          <mat-select formControlName="agrupacion" [disabled]="!isRevistaFormValid()">
            <mat-option *ngFor="let agrup of agrupaciones" [value]="agrup.value">{{ agrup.viewValue }}</mat-option>
          </mat-select>
          <mat-error *ngIf="revistaForm.get('agrupacion')?.errors?.['required']">La agrupación es requerida.</mat-error>
        </mat-form-field>
    
        <mat-form-field appearance="fill">
          <mat-label>Categoría</mat-label>
          <mat-select formControlName="categoria" [compareWith]="compareTipoRevista" [disabled]="!isRevistaFormValid()">
            <mat-option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria.nombre }}</mat-option>
          </mat-select>
          <mat-error *ngIf="revistaForm.get('categoria')?.errors?.['required']">La categoría es requerida.</mat-error>
        </mat-form-field>
    
        <mat-form-field appearance="fill">
          <mat-label>Adicional</mat-label>
          <mat-select formControlName="adicional" [compareWith]="compareTipoRevista" [disabled]="!isRevistaFormValid()">
            <mat-option *ngFor="let adicional of adicionales" [value]="adicional">{{ adicional.nombre }}</mat-option>
          </mat-select>
          <mat-error *ngIf="revistaForm.get('adicional')?.errors?.['required']">Adicional es requerido.</mat-error>
        </mat-form-field>
    
        <mat-form-field appearance="fill">
          <mat-label>Carga Horaria</mat-label>
          <mat-select formControlName="cargaHoraria" [compareWith]="compareTipoRevista" [disabled]="!isRevistaFormValid()">
            <mat-option *ngFor="let cargaHoraria of cargasHorarias" [value]="cargaHoraria">{{ cargaHoraria.cantidad }}</mat-option>
          </mat-select>
          <mat-error *ngIf="revistaForm.get('cargaHoraria')?.errors?.['required']">La carga horaria es requerida.</mat-error>
        </mat-form-field>
    
        <mat-form-field appearance="fill">
          <mat-label>Tipo de revista</mat-label>
          <mat-select formControlName="tipoRevista" [compareWith]="compareTipoRevista" [disabled]="!isRevistaFormValid()">
            <mat-option *ngFor="let tipoRevista of tiposRevistas" [value]="tipoRevista">{{ tipoRevista.nombre }}</mat-option>
          </mat-select>
          <mat-error *ngIf="revistaForm.get('tipoRevista')?.errors?.['required']">El tipo de revista es requerido.</mat-error>
        </mat-form-field>
    
        <button mat-raised-button color="primary" (click)="crearRevista()" [disabled]="!isRevistaFormValid() || isRevistaSelected()">
          Crear Revista
        </button>
      </form>
      </div>
      
  <!-- Formulario de Legajo -->
  <form [formGroup]="legajoForm" (ngSubmit)="saveLegajo()">
    <mat-form-field appearance="fill">
      <mat-label>Persona</mat-label>
      <mat-select formControlName="persona" [compareWith]="comparePersona">
        <mat-option *ngFor="let persona of personas" [value]="persona">{{ persona.nombre }}</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('persona')?.errors?.['required']">La persona es requerida.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Profesión</mat-label>
      <mat-select formControlName="profesion" [compareWith]="compareProfesion">
        <mat-option *ngFor="let profesion of profesiones" [value]="profesion">{{ profesion.nombre }}</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('profesion')?.errors?.['required']">La profesión es requerida.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Revista</mat-label>
      <input matInput formControlName="revista">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>U.D.O. (a la que pertenece el cargo)</mat-label>
      <mat-select formControlName="udo" [compareWith]="compareUdo">
        <mat-option *ngFor="let udo of efectores" [value]="udo">{{ udo.nombre }}</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('udo')?.errors?.['required']">La U.D.O. es requerida.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Matrícula Nacional</mat-label>
      <input matInput formControlName="matriculaNacional">
      <mat-error *ngIf="legajoForm.get('matriculaNacional')?.errors?.['pattern']">El n° de matrícula puede tener letras y números (entre 5 y 20 caracteres).</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Matrícula Provincial</mat-label>
      <input matInput formControlName="matriculaProvincial">
      <mat-error *ngIf="legajoForm.get('matriculaProvincial')?.errors?.['pattern']">El n° de matrícula puede tener letras y números (entre 5 y 20 caracteres).</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Actual</mat-label>
      <mat-select formControlName="actual">
        <mat-option [value]="true">Si</mat-option>
        <mat-option [value]="false">No</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('actual')?.errors?.['required']">El campo es requerido.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Legal</mat-label>
      <mat-select formControlName="legal">
        <mat-option [value]="true">Si</mat-option>
        <mat-option [value]="false">No</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('legal')?.errors?.['required']">El campo es requerido.</mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="fill">
      <mat-label>Fecha Inicio</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="fechaInicio">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="legajoForm.get('fechaInicio')?.errors?.['required']">La fecha es requerida.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Fecha Fin</mat-label>
      <input matInput [matDatepicker]="picker2" formControlName="fechaFinal">
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
      <!-- <mat-error *ngIf="legajoForm.get('fechaFinal')?.errors?.['required']">La fecha es requerida.</mat-error> -->
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Efectores</mat-label>
      <mat-select formControlName="efectores" multiple>
        <mat-option *ngFor="let efector of efectores" [value]="efector.id">{{ efector.nombre }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Especialidades</mat-label>
      <mat-select formControlName="especialidades" multiple>
        <mat-option *ngFor="let especialidad of especialidades" [value]="especialidad.id">{{ especialidad.nombre }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Cargo</mat-label>
      <mat-select formControlName="cargo" [compareWith]="compareCargo">
        <mat-option *ngFor="let cargo of cargos" [value]="cargo" >{{ cargo.nombre }}</mat-option>
      </mat-select>
      <mat-error *ngIf="legajoForm.get('cargo')?.errors?.['required']">El cargo es requerido.</mat-error>
    </mat-form-field>

    <div mat-dialog-actions class="action mt-4">
      <button mat-raised-button color="primary" type="submit" [disabled]="!legajoForm.valid || !isModified()">
        {{data ? 'Modificar' : 'Agregar'}}
      </button>
      <button mat-raised-button color="secondary" type="button" (click)="cancel()">
        Cancelar
      </button>
    </div>
  </form>
</mat-dialog-content>